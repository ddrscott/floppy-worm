const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/phaser-BlBtQGNw.js","assets/index-DogrX72I.js","assets/MapSelectScene-DLOSEARm.js"])))=>i.map(i=>d[i]);
import{r as u,j as t}from"./index-DogrX72I.js";function v({children:c,fallback:d=null}){const[a,m]=u.useState(!1);return u.useEffect(()=>{m(!0)},[]),a?t.jsx(t.Fragment,{children:c}):t.jsx(t.Fragment,{children:d})}const x="modulepreload",E=function(c){return"/"+c},y={},p=function(d,a,m){let l=Promise.resolve();if(a&&a.length>0){let n=function(r){return Promise.all(r.map(o=>Promise.resolve(o).then(i=>({status:"fulfilled",value:i}),i=>({status:"rejected",reason:i}))))};document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),f=(e==null?void 0:e.nonce)||(e==null?void 0:e.getAttribute("nonce"));l=n(a.map(r=>{if(r=E(r),r in y)return;y[r]=!0;const o=r.endsWith(".css"),i=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${i}`))return;const s=document.createElement("link");if(s.rel=o?"stylesheet":x,o||(s.as="script"),s.crossOrigin="",s.href=r,f&&s.setAttribute("nonce",f),document.head.appendChild(s),o)return new Promise((g,w)=>{s.addEventListener("load",g),s.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${r}`)))})}))}function h(n){const e=new Event("vite:preloadError",{cancelable:!0});if(e.payload=n,window.dispatchEvent(e),!e.defaultPrevented)throw n}return l.then(n=>{for(const e of n||[])e.status==="rejected"&&h(e.reason);return d().catch(h)})};function j(){const[c,d]=u.useState(!1),[a,m]=u.useState(null);return u.useEffect(()=>{let l=!0;const n=(async()=>{try{const[{default:e},f]=await Promise.all([p(()=>import("./phaser-BlBtQGNw.js").then(i=>i.p),__vite__mapDeps([0,1])),p(()=>import("./dat.gui.module-DNo137I2.js"),[])]);window.dat=f;const{default:r}=await p(async()=>{const{default:i}=await import("./MapSelectScene-DLOSEARm.js");return{default:i}},__vite__mapDeps([2,0,1]));if(!l)return;const o=new e.Game({type:e.AUTO,parent:"game-container",backgroundColor:"#232333",scale:{mode:e.Scale.FIT,autoCenter:e.Scale.CENTER_BOTH,width:"100%",height:"100%"},physics:{default:"matter",matter:{gravity:{y:1},debug:{showBody:!0,showStaticBody:!0,showVelocity:!1,bodyColor:16711680},positionIterations:20,velocityIterations:20,constraintIterations:2,enableSleeping:!0}},input:{gamepad:!0},scene:[r]});return window.game=o,l&&d(!0),()=>{o&&o.destroy(!0)}}catch(e){console.error("Failed to load game:",e),l&&m(e instanceof Error?e.message:"Failed to load game")}})();return()=>{l=!1,n&&typeof n=="function"&&n()}},[]),a?t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#232333",color:"red",fontFamily:"Arial"},children:t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("h2",{children:"Failed to load game"}),t.jsxs("p",{children:["Error: ",a]}),t.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"10px",padding:"10px"},children:"Retry"})]})}):t.jsxs("div",{style:{width:"100vw",height:"100vh",position:"relative"},children:[!1,t.jsx("div",{id:"game-container",style:{width:"100%",height:"100%"},children:!c&&t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#232333",color:"white",fontFamily:"Arial"},children:"Loading Floppy Worm..."})})]})}const S=()=>[{title:"Floppy Worm"},{name:"description",content:"A physics-based worm game built with Phaser 3 and Matter.js"}];function b(){return t.jsx(v,{fallback:t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#232333",color:"white"},children:"Loading Floppy Worm..."}),children:t.jsx(j,{})})}export{b as default,S as meta};
